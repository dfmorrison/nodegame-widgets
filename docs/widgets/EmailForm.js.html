<!DOCTYPE html>
<html>
<head>
  <title>EmailForm.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "widgets/EmailForm.js", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#emailform">EmailForm</a>
      </div>
      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>
      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>
      <div class="heading h2">
        <a href="#emailform%20constructor">EmailForm constructor</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.label">EmailForm.label</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.errstring">EmailForm.errString</a>
      </div>
      <div class="heading h3">
        <a href="#emailform._email">EmailForm._email</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.attempts">EmailForm.attempts</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.timeinput">EmailForm.timeInput</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.formelement">EmailForm.formElement</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.inputelement">EmailForm.inputElement</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.emailbuttonelement">EmailForm.emailButtonElement</a>
      </div>
      <div class="heading h2">
        <a href="#emailform%20methods">EmailForm methods</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.verifyemail">EmailForm.verifyEmail</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.append">EmailForm.append</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.setvalues">EmailForm.setValues</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.getvalues">EmailForm.getValues</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.sendvalues">EmailForm.sendValues</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.isvalidemail">EmailForm.isValidEmail</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.highlight">EmailForm.highlight</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.unhighlight">EmailForm.unhighlight</a>
      </div>
      <div class="heading h3">
        <a href="#emailform.reset">EmailForm.reset</a>
      </div>
      <div class="heading h2">
        <a href="#helper%20methods.">Helper methods.</a>
      </div>
      <div class="heading h3">
        <a href="#getemail">getEmail</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform">
  <h1>
    <a href="#emailform" name="emailform" class="pilcrow">&#182;</a>
    EmailForm
  </h1>
</div>


<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
  </div>
  <div class="body"><p>Displays a form to input email</p>

<p>www.nodegame.org</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>

    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">J</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">JSUS</span><span class="p">;</span>

    <span class="nx">node</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;EmailForm&#39;</span><span class="p">,</span> <span class="nx">EmailForm</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow">&#182;</a>
    Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="s1">&#39;0.2.0&#39;</span><span class="p">;</span>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="s1">&#39;Displays a simple email form.&#39;</span><span class="p">;</span>

    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;Email&#39;</span><span class="p">;</span>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;emailform&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow">&#182;</a>
    Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">JSUS</span><span class="o">:</span> <span class="p">{}</span> <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform%20constructor">
  <h2>
    <a href="#emailform%20constructor" name="emailform%20constructor" class="pilcrow">&#182;</a>
    EmailForm constructor
  </h2>
</div>

  </div>
  <div class="body"><p><code>EmailForm</code> sends a feedback message to the server</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options</span>
      <span class="dox_type">object</span>
      <span>configuration option</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">EmailForm</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.label">
  <h3>
    <a href="#emailform.label" name="emailform.label" class="pilcrow">&#182;</a>
    EmailForm.label
  </h3>
</div>

  </div>
  <div class="body"><p>The label for the email element</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;Enter your email:&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;EmailForm constructor: options.label &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;must be string or undefined. &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;Found: &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.errstring">
  <h3>
    <a href="#emailform.errstring" name="emailform.errstring" class="pilcrow">&#182;</a>
    EmailForm.errString
  </h3>
</div>

  </div>
  <div class="body"><p>The error message in case of invalid email format</p>

<p>Notice! It is displayed only if the submit button is displayed.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">errString</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">errString</span> <span class="o">=</span> <span class="s1">&#39;Not a valid email address, &#39;</span> <span class="o">+</span>
                <span class="s1">&#39;please correct it and submit again.&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">errString</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">errString</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">errString</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;EmailForm constructor: options.errString &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;must be string or undefined. &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;Found: &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">errString</span><span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform._email">
  <h3>
    <a href="#emailform._email" name="emailform._email" class="pilcrow">&#182;</a>
    EmailForm._email
  </h3>
</div>

  </div>
  <div class="body"><p>Internal storage of the value of the email</p>

<p>This value is used when the form has not been created yet</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.createForm
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">_email</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">email</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.attempts">
  <h3>
    <a href="#emailform.attempts" name="emailform.attempts" class="pilcrow">&#182;</a>
    EmailForm.attempts
  </h3>
</div>

  </div>
  <div class="body"><p>Invalid emails tried</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span> <span class="o">=</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.timeinput">
  <h3>
    <a href="#emailform.timeinput" name="emailform.timeinput" class="pilcrow">&#182;</a>
    EmailForm.timeInput
  </h3>
</div>

  </div>
  <div class="body"><p>Time when the email was inserted (first character)</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">timeInput</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.formelement">
  <h3>
    <a href="#emailform.formelement" name="emailform.formelement" class="pilcrow">&#182;</a>
    EmailForm.formElement
  </h3>
</div>

  </div>
  <div class="body"><p>The email's HTML form</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">formElement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.inputelement">
  <h3>
    <a href="#emailform.inputelement" name="emailform.inputelement" class="pilcrow">&#182;</a>
    EmailForm.inputElement
  </h3>
</div>

  </div>
  <div class="body"><p>The email's HTML input form</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.emailbuttonelement">
  <h3>
    <a href="#emailform.emailbuttonelement" name="emailform.emailbuttonelement" class="pilcrow">&#182;</a>
    EmailForm.emailButtonElement
  </h3>
</div>

  </div>
  <div class="body"><p>The email's HTML submit button</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="emailform%20methods">
  <h2>
    <a href="#emailform%20methods" name="emailform%20methods" class="pilcrow">&#182;</a>
    EmailForm methods
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createForm</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">that</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">formElement</span><span class="p">,</span> <span class="nx">labelElement</span><span class="p">,</span> <span class="nx">inputElement</span><span class="p">,</span> <span class="nx">buttonElement</span><span class="p">;</span>

        <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="nx">formElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">);</span>
        <span class="nx">formElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;endscreen-email-form&#39;</span><span class="p">;</span>

        <span class="nx">labelElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">);</span>
        <span class="nx">labelElement</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>

        <span class="nx">inputElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>
        <span class="nx">inputElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">);</span>
        <span class="nx">inputElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;placeholder&#39;</span><span class="p">,</span> <span class="s1">&#39;Email&#39;</span><span class="p">);</span>
        <span class="nx">inputElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;emailform-input form-control&#39;</span><span class="p">;</span>

        <span class="nx">buttonElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>
        <span class="nx">buttonElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>
        <span class="nx">buttonElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;Submit email&#39;</span><span class="p">);</span>
        <span class="nx">buttonElement</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;btn btn-lg btn-primary &#39;</span> <span class="o">+</span>
            <span class="s1">&#39;endscreen-email-submit&#39;</span><span class="p">;</span>

        <span class="nx">formElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">labelElement</span><span class="p">);</span>
        <span class="nx">formElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">inputElement</span><span class="p">);</span>
        <span class="nx">formElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">buttonElement</span><span class="p">);</span>


        <span class="nx">formElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="nx">that</span><span class="p">.</span><span class="nx">getValues</span><span class="p">({</span> <span class="nx">emailOnly</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
        <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Store references.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">formElement</span> <span class="o">=</span> <span class="nx">formElement</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span> <span class="o">=</span> <span class="nx">inputElement</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span> <span class="o">=</span> <span class="nx">buttonElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>If a value was previously set, insert it in the form.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_email</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_email</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_email</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">formElement</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.verifyemail">
  <h3>
    <a href="#emailform.verifyemail" name="emailform.verifyemail" class="pilcrow">&#182;</a>
    EmailForm.verifyEmail
  </h3>
</div>

  </div>
  <div class="body"><p>Verify current email, updates interface, and optionally marks attempt</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">markAttempt</span>
      <span class="dox_type">boolean</span>
      <span>Optional. If TRUE, the current email
  is added to the attempts array. Default: TRUE</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean</span>
      <span>TRUE if the email is valid</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.getValues</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">getEmail
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">verifyEmail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">markAttempt</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">res</span><span class="p">;</span>
        <span class="nx">email</span> <span class="o">=</span> <span class="nx">getEmail</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">res</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">isValidEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;Sent!&#39;</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">markAttempt</span> <span class="o">||</span> <span class="nx">markAttempt</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">errString</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.append">
  <h3>
    <a href="#emailform.append" name="emailform.append" class="pilcrow">&#182;</a>
    EmailForm.append
  </h3>
</div>

  </div>
  <div class="body"><p>Appends widget to this.bodyDiv</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">createForm</span><span class="p">();</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">bodyDiv</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.setvalues">
  <h3>
    <a href="#emailform.setvalues" name="emailform.setvalues" class="pilcrow">&#182;</a>
    EmailForm.setValues
  </h3>
</div>

  </div>
  <div class="body"><p>Set the value of the email input form</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">email</span><span class="p">;</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">email</span> <span class="o">=</span> <span class="nx">J</span><span class="p">.</span><span class="nx">randomString</span><span class="p">(</span><span class="nx">J</span><span class="p">.</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span> <span class="s1">&#39;!Aa0&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;@&#39;</span> <span class="o">+</span>
                <span class="nx">J</span><span class="p">.</span><span class="nx">randomString</span><span class="p">(</span><span class="nx">J</span><span class="p">.</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>  <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span>
                <span class="nx">J</span><span class="p">.</span><span class="nx">randomString</span><span class="p">(</span><span class="nx">J</span><span class="p">.</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">email</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">email</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_email</span> <span class="o">=</span> <span class="nx">email</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">email</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">timeInput</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span> <span class="o">?</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.getvalues">
  <h3>
    <a href="#emailform.getvalues" name="emailform.getvalues" class="pilcrow">&#182;</a>
    EmailForm.getValues
  </h3>
</div>

  </div>
  <div class="body"><p>Returns the email input form</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">opts</span>
      <span class="dox_type">object</span>
      <span>Optional. Configures the return value.
  Available optionts:

<ul>
<li>emailOnly:   If TRUE, returns just the email (default: FALSE),</li>
<li>verify:      If TRUE, check if the email is valid (default: TRUE),</li>
<li>reset:       If TRUTHY and the email is valid, then it resets
  the email value before returning (default: FALSE),</li>
<li>markAttempt: If TRUE, getting the value counts as an attempt
  (default: TRUE),</li>
<li>highlight:   If TRUE, if email is not the valid, widget
  will be highlighted. Default: FALSE.</li>
</ul></span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">object</span>
      <span>The email, and optional paradata</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.sendValues</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.verifyEmail</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">getEmail
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">res</span><span class="p">;</span>
        <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{};</span>

        <span class="nx">email</span> <span class="o">=</span> <span class="nx">getEmail</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>Email, with or without email form; or FALSE if invalid.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">verify</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">verifyEmail</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">markAttempt</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>Only value.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opts</span><span class="p">.</span><span class="nx">emailOnly</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">res</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">highlight</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">hightlight</span><span class="p">();</span>

            <span class="nx">email</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">time</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeInput</span><span class="p">,</span>
                <span class="nx">email</span><span class="o">:</span> <span class="nx">email</span><span class="p">,</span>
                <span class="nx">attempts</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span><span class="p">,</span>
                <span class="nx">valid</span><span class="o">:</span> <span class="nx">res</span>
            <span class="p">};</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">say</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">sendValues</span><span class="p">({</span> <span class="nx">values</span><span class="o">:</span> <span class="nx">email</span> <span class="p">});</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">reset</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">email</span><span class="p">;</span>
    <span class="p">};</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.sendvalues">
  <h3>
    <a href="#emailform.sendvalues" name="emailform.sendvalues" class="pilcrow">&#182;</a>
    EmailForm.sendValues
  </h3>
</div>

  </div>
  <div class="body"><p>Sends a DATA message with label 'email' with current email and paradata</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">opts</span>
      <span class="dox_type">object</span>
      <span>Optional. Options to pass to the <code>getValues</code>
   method. Additional options:

<ul>
<li>values: actual values to send, instead of the return
   value of <code>getValues</code></li>
<li>to: recipient of the message. Default: 'SERVER'</li>
</ul></span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">object</span>
      <span>The email, and optional paradata</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.getValues
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sendValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">values</span><span class="p">;</span>
        <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">emailOnly</span><span class="o">:</span> <span class="kc">true</span> <span class="p">};</span>
        <span class="nx">values</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">values</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">getValues</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">to</span> <span class="o">||</span> <span class="s1">&#39;SERVER&#39;</span><span class="p">,</span> <span class="nx">values</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.isvalidemail">
  <h3>
    <a href="#emailform.isvalidemail" name="emailform.isvalidemail" class="pilcrow">&#182;</a>
    EmailForm.isValidEmail
  </h3>
</div>

  </div>
  <div class="body"><p>Returns TRUE if the email is valid</p>

<p>TODO: improve validation. Move into JSUS?</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">email
</span>
      <span class="dox_type">string</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean</span>
      <span>res TRUE, if the email is valid</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isValidEmail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">email</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">idx</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">email</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

        <span class="nx">idx</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="nx">idx</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">idx</span> <span class="o">===</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

        <span class="nx">idx</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">idx</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="nx">idx</span> <span class="o">===</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="nx">idx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nx">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.highlight">
  <h3>
    <a href="#emailform.highlight" name="emailform.highlight" class="pilcrow">&#182;</a>
    EmailForm.highlight
  </h3>
</div>

  </div>
  <div class="body"><p>Highlights the email form</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">The</span>
      <span class="dox_type">string</span>
      <span>style for the form border. Default: '1px solid red'</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.highlighted
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">highlight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">border</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">border</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;string&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">border</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;EmailForm.highlight: border must be &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;string or undefined. Found: &#39;</span> <span class="o">+</span> <span class="nx">border</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="nx">border</span> <span class="o">||</span> <span class="s1">&#39;3px solid red&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">highlighted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.unhighlight">
  <h3>
    <a href="#emailform.unhighlight" name="emailform.unhighlight" class="pilcrow">&#182;</a>
    EmailForm.unhighlight
  </h3>
</div>

  </div>
  <div class="body"><p>Removes highlight from the form</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">EmailForm.highlighted
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">unhighlight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">formElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">highlighted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="emailform.reset">
  <h3>
    <a href="#emailform.reset" name="emailform.reset" class="pilcrow">&#182;</a>
    EmailForm.reset
  </h3>
</div>

  </div>
  <div class="body"><p>Resets email and collected paradata</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">EmailForm</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">timeInput</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_email</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isHighlighted</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">unhighlight</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="helper%20methods.">
  <h2>
    <a href="#helper%20methods." name="helper%20methods." class="pilcrow">&#182;</a>
    Helper methods.
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getemail">
  <h3>
    <a href="#getemail" name="getemail" class="pilcrow">&#182;</a>
    getEmail
  </h3>
</div>

  </div>
  <div class="body"><p>Returns the value of the email in form or in <code>_email</code></p>

<p>Must be invoked with right context</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">null</span>
      <span>The value of the email, if any</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">getEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_email</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">})(</span><span class="nx">node</span><span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
