<!DOCTYPE html>
<html>
<head>
  <title>Feedback.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../", thisFile = "widgets/Feedback.js", defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#feedback">Feedback</a>
      </div>
      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>
      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>
      <div class="heading h2">
        <a href="#feedback%20constructor">Feedback constructor</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.label">Feedback.label</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.maxfeedbacklength">Feedback.maxFeedbackLength</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.minfeedbacklength">Feedback.minFeedbackLength</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.feedbackhtml">Feedback.feedbackHTML</a>
      </div>
      <div class="heading h2">
        <a href="#feedback%20methods">Feedback methods</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.createform">Feedback.createForm</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.verifyfeedback">Feedback.verifyFeedback</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.append">Feedback.append</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.setvalues">Feedback.setValues</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.getvalues">Feedback.getValues</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.sendvalues">Feedback.sendValues</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.highlight">Feedback.highlight</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.unhighlight">Feedback.unhighlight</a>
      </div>
      <div class="heading h3">
        <a href="#feedback.reset">Feedback.reset</a>
      </div>
      <div class="heading h2">
        <a href="#helper%20functions.">Helper functions.</a>
      </div>
      <div class="heading h3">
        <a href="#checkfeedbacklength">checkFeedbackLength</a>
      </div>
      <div class="heading h3">
        <a href="#getfeedback">getFeedback</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback">
  <h1>
    <a href="#feedback" name="feedback" class="pilcrow">&#182;</a>
    Feedback
  </h1>
</div>


<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
  </div>
  <div class="body"><p>Sends a feedback message to the server</p>

<p>www.nodegame.org</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>

    <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">J</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">JSUS</span><span class="p">;</span>

    <span class="nx">node</span><span class="p">.</span><span class="nx">widgets</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s1">&#39;Feedback&#39;</span><span class="p">,</span> <span class="nx">Feedback</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow">&#182;</a>
    Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="s1">&#39;0.9.0&#39;</span><span class="p">;</span>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="s1">&#39;Displays a configurable feedback form.&#39;</span><span class="p">;</span>

    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;Feedback&#39;</span><span class="p">;</span>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;feedback&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow">&#182;</a>
    Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">dependencies</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">JSUS</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback%20constructor">
  <h2>
    <a href="#feedback%20constructor" name="feedback%20constructor" class="pilcrow">&#182;</a>
    Feedback constructor
  </h2>
</div>

  </div>
  <div class="body"><p><code>Feedback</code> sends a feedback message to the server</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options</span>
      <span class="dox_type">object</span>
      <span>configuration option</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">Feedback</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.label">
  <h3>
    <a href="#feedback.label" name="feedback.label" class="pilcrow">&#182;</a>
    Feedback.label
  </h3>
</div>

  </div>
  <div class="body"><p>The label for the feedback element</p>

<p>Default: 'Any feedback about the experiment? Let us know here: '</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;Any feedback about the experiment? Let us know here:&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">label</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Feedback constructor: options.label &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;must be string or undefined. &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;Found: &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.maxfeedbacklength">
  <h3>
    <a href="#feedback.maxfeedbacklength" name="feedback.maxfeedbacklength" class="pilcrow">&#182;</a>
    Feedback.maxFeedbackLength
  </h3>
</div>

  </div>
  <div class="body"><p>The maximum character length for feedback to be submitted</p>

<p>Default: 800</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">maxFeedbackLength</span> <span class="o">=</span> <span class="mi">800</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">JSUS</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">maxFeedbackLength</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Feedback constructor: options.maxLength &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;must be a number &gt;= 0 or undefined. &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;Found: &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">maxLength</span><span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.minfeedbacklength">
  <h3>
    <a href="#feedback.minfeedbacklength" name="feedback.minfeedbacklength" class="pilcrow">&#182;</a>
    Feedback.minFeedbackLength
  </h3>
</div>

  </div>
  <div class="body"><p>The minimum character length for feedback to be submitted</p>

<p>If minFeedbackLength = 0, then there is no minimum length checked.
Default: 0</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">minLength</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">minFeedbackLength</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">JSUS</span><span class="p">.</span><span class="nx">isNumber</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">minLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">minFeedbackLength</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">minLength</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Feedback constructor: options.minLength &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;must be a number &gt;= 0 or undefined. &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;Found: &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">minLength</span><span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.feedbackhtml">
  <h3>
    <a href="#feedback.feedbackhtml" name="feedback.feedbackhtml" class="pilcrow">&#182;</a>
    Feedback.feedbackHTML
  </h3>
</div>

  </div>
  <div class="body"><p>The HTML element containing the form elements</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="feedback%20methods">
  <h2>
    <a href="#feedback%20methods" name="feedback%20methods" class="pilcrow">&#182;</a>
    Feedback methods
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.createform">
  <h3>
    <a href="#feedback.createform" name="feedback.createform" class="pilcrow">&#182;</a>
    Feedback.createForm
  </h3>
</div>

  </div>
  <div class="body"><p>Builds the HTML forms </p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">showCount</span>
      <span class="dox_type">boolean</span>
      <span>If TRUE, the character count is displayed</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">minLength</span>
      <span class="dox_type">number</span>
      <span>The minimum number of characters in textarea</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">maxLength</span>
      <span class="dox_type">number</span>
      <span>The max number of characters in textarea</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">labelText</span>
      <span class="dox_type">string</span>
      <span>The text to display above the textarea</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">createForm</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">showCount</span><span class="p">,</span> <span class="nx">minLength</span><span class="p">,</span>
                                             <span class="nx">maxLength</span><span class="p">,</span> <span class="nx">labelText</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">feedbackHTML</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">feedbackForm</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">feedbackLabel</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">feedbackTextarea</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">submit</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">charCounter</span><span class="p">;</span>

        <span class="nx">feedbackHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
        <span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;feedback&#39;</span><span class="p">;</span>

        <span class="nx">feedbackForm</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">);</span>
        <span class="nx">feedbackForm</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;feedback-form&#39;</span><span class="p">;</span>
        <span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">feedbackForm</span><span class="p">);</span>

        <span class="nx">feedbackLabel</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">);</span>
        <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;for&#39;</span><span class="p">,</span> <span class="s1">&#39;feedback-input&#39;</span><span class="p">);</span>
        <span class="nx">feedbackLabel</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">labelText</span><span class="p">;</span>
        <span class="nx">feedbackForm</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">feedbackLabel</span><span class="p">);</span>

        <span class="nx">feedbackTextarea</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;textarea&#39;</span><span class="p">);</span>
        <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;feedback-textarea form-control&#39;</span><span class="p">;</span>
        <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">);</span>
        <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;rows&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">);</span>
        <span class="nx">feedbackForm</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">feedbackTextarea</span><span class="p">);</span>

        <span class="nx">submit</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>
        <span class="nx">submit</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;btn btn-lg btn-primary&#39;</span><span class="p">;</span>
        <span class="nx">submit</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">);</span>
        <span class="nx">submit</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;Submit feedback&#39;</span><span class="p">);</span>
        <span class="nx">feedbackForm</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">submit</span><span class="p">);</span>

        <span class="nx">charCounter</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">);</span>
        <span class="nx">charCounter</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;feedback-char-count badge&#39;</span><span class="p">;</span>
        <span class="nx">charCounter</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">maxLength</span><span class="p">;</span>
        <span class="nx">feedbackForm</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">charCounter</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<p>Add listeners.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">J</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">feedbackForm</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">feedback</span><span class="p">;</span>

            <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

            <span class="nx">feedback</span> <span class="o">=</span> <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">();</span>
            <span class="nx">node</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;feedback&#39;</span><span class="p">,</span> <span class="s1">&#39;SERVER&#39;</span><span class="p">,</span> <span class="nx">feedback</span><span class="p">);</span>

            <span class="nx">submit</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="nx">submit</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="s1">&#39;Sent!&#39;</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="nx">J</span><span class="p">.</span><span class="nx">addEvent</span><span class="p">(</span><span class="nx">feedbackForm</span><span class="p">,</span> <span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">checkFeedbackLength</span><span class="p">(</span><span class="nx">feedbackTextarea</span><span class="p">,</span> <span class="nx">charCounter</span><span class="p">,</span> <span class="nx">submit</span><span class="p">,</span>
                                <span class="nx">minLength</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">);</span>
        <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Check it once at the beginning.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">checkFeedbackLength</span><span class="p">(</span><span class="nx">feedbackTextarea</span><span class="p">,</span> <span class="nx">charCounter</span><span class="p">,</span> <span class="nx">submit</span><span class="p">,</span>
                            <span class="nx">minLength</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">feedbackHTML</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.verifyfeedback">
  <h3>
    <a href="#feedback.verifyfeedback" name="feedback.verifyfeedback" class="pilcrow">&#182;</a>
    Feedback.verifyFeedback
  </h3>
</div>

  </div>
  <div class="body"><p>Verify feedback and optionally marks attempt and updates interface</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">markAttempt</span>
      <span class="dox_type">boolean</span>
      <span>Optional. If TRUE, the current email
   is added to the attempts array. Default: TRUE</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">updateUI</span>
      <span class="dox_type">boolean</span>
      <span>Optional. If TRUE, the interface is updated.
   Default: FALSE</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">boolean</span>
      <span>TRUE, if the email is valid</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.getValues</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">getEmail
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">verifyFeedback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">markAttempt</span><span class="p">,</span> <span class="nx">updateUI</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">res</span><span class="p">;</span>
        <span class="nx">email</span> <span class="o">=</span> <span class="nx">getEmail</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">res</span> <span class="o">=</span> <span class="nx">J</span><span class="p">.</span><span class="nx">isEmail</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span> <span class="o">&amp;&amp;</span> <span class="nx">updateUI</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">inputElement</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;Sent!&#39;</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">updateUI</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">buttonElement</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">errString</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;undefined&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">markAttempt</span> <span class="o">||</span> <span class="nx">markAttempt</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">res</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.append">
  <h3>
    <a href="#feedback.append" name="feedback.append" class="pilcrow">&#182;</a>
    Feedback.append
  </h3>
</div>

  </div>
  <div class="body"><p>Appends widget to this.bodyDiv</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createForm</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">showCharCount</span><span class="p">,</span>
                                            <span class="k">this</span><span class="p">.</span><span class="nx">minFeedbackLength</span><span class="p">,</span>
                                            <span class="k">this</span><span class="p">.</span><span class="nx">maxFeedbackLength</span><span class="p">,</span>
                                            <span class="k">this</span><span class="p">.</span><span class="nx">label</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">bodyDiv</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.setvalues">
  <h3>
    <a href="#feedback.setvalues" name="feedback.setvalues" class="pilcrow">&#182;</a>
    Feedback.setValues
  </h3>
</div>

  </div>
  <div class="body"><p>Set the value of the feedback</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">feedback</span><span class="p">;</span>
        <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">options</span><span class="p">.</span><span class="nx">feedback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">feedback</span> <span class="o">=</span> <span class="nx">J</span><span class="p">.</span><span class="nx">randomString</span><span class="p">(</span><span class="nx">J</span><span class="p">.</span><span class="nx">randomInt</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxFeedbackLength</span><span class="p">),</span>
                                      <span class="s1">&#39;aA_1&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nx">feedback</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">feedback</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_feedback</span> <span class="o">=</span> <span class="nx">feedback</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">feedback</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">timeInputBegin</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeInputEnd</span> <span class="o">=</span> <span class="nx">J</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.getvalues">
  <h3>
    <a href="#feedback.getvalues" name="feedback.getvalues" class="pilcrow">&#182;</a>
    Feedback.getValues
  </h3>
</div>

  </div>
  <div class="body"><p>Returns the feedback and paradata</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">opts</span>
      <span class="dox_type">object</span>
      <span>Optional. Configures the return value.
  Available optionts:

<ul>
<li>feedbackOnly:If TRUE, returns just the feedback (default: FALSE),</li>
<li>verify:      If TRUE, check if the feedback is valid (default: TRUE),</li>
<li>reset:       If TRUTHY and the feedback is valid, then it resets
  the feedback value before returning (default: FALSE),</li>
<li>markAttempt: If TRUE, getting the value counts as an attempt
  (default: TRUE),</li>
<li>updateUI:    If TRUE, the UI (form, input, button) is updated.
             Default: FALSE.</li>
<li>highlight:   If TRUE, if feedback is not the valid, widget is
             is highlighted. Default: (updateUI || FALSE).</li>
<li>say:         If TRUE, and the feedback is valid, then it sends
             a data msg. Default: FALSE.</li>
<li>sayAnyway:   If TRUE, it sends a data msg regardless of the
             validity of the feedback. Default: FALSE.</li>
</ul></span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">object</span>
      <span>The feedback, and optional paradata</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.sendValues</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.verifyInput</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">getFeedback
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">feedback</span><span class="p">,</span> <span class="nx">res</span><span class="p">;</span>
        <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{};</span>

        <span class="nx">feedback</span> <span class="o">=</span> <span class="nx">getFeedback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">verify</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">verifyInput</span><span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">markAttempt</span><span class="p">,</span>
                                                          <span class="nx">opts</span><span class="p">.</span><span class="nx">updateUI</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">res</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">updateUI</span> <span class="o">||</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">highlight</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">highlight</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>Only value.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opts</span><span class="p">.</span><span class="nx">feedbackOnly</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">feedback</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">timeBegin</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeInputBegin</span><span class="p">,</span>
                <span class="nx">timeEnd</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeInputEnd</span><span class="p">,</span>
                <span class="nx">feedback</span><span class="o">:</span> <span class="nx">feedback</span><span class="p">,</span>
                <span class="nx">attempts</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span><span class="p">,</span>
                <span class="nx">valid</span><span class="o">:</span> <span class="nx">res</span>
            <span class="p">};</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>Send the message.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">((</span><span class="nx">opts</span><span class="p">.</span><span class="nx">say</span> <span class="o">&amp;&amp;</span> <span class="nx">res</span><span class="p">)</span> <span class="o">||</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">sayAnyway</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">sendValues</span><span class="p">({</span> <span class="nx">values</span><span class="o">:</span> <span class="nx">feedback</span> <span class="p">});</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">opts</span><span class="p">.</span><span class="nx">reset</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

        <span class="k">return</span> <span class="nx">feedback</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.sendvalues">
  <h3>
    <a href="#feedback.sendvalues" name="feedback.sendvalues" class="pilcrow">&#182;</a>
    Feedback.sendValues
  </h3>
</div>

  </div>
  <div class="body"><p>Sends a DATA message with label 'feedback' with current feedback and paradata</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">opts</span>
      <span class="dox_type">object</span>
      <span>Optional. Options to pass to the <code>getValues</code>
   method. Additional options:

<ul>
<li>values: actual values to send, instead of the return
   value of <code>getValues</code></li>
<li>to: recipient of the message. Default: 'SERVER'</li>
</ul></span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">object</span>
      <span>The feedback, and optional paradata</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.getValues
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">sendValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">values</span><span class="p">;</span>
        <span class="nx">opts</span> <span class="o">=</span> <span class="nx">opts</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">feedbackOnly</span><span class="o">:</span> <span class="kc">true</span> <span class="p">};</span>
        <span class="nx">values</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">values</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">getValues</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;feedback&#39;</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">to</span> <span class="o">||</span> <span class="s1">&#39;SERVER&#39;</span><span class="p">,</span> <span class="nx">values</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.highlight">
  <h3>
    <a href="#feedback.highlight" name="feedback.highlight" class="pilcrow">&#182;</a>
    Feedback.highlight
  </h3>
</div>

  </div>
  <div class="body"><p>Highlights the feedback form</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">The</span>
      <span class="dox_type">string</span>
      <span>style for the form border. Default: '1px solid red'</span>
    </div>
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.highlighted
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">highlight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">border</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">border</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;string&#39;</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">border</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">&#39;Feedback.highlight: border must be &#39;</span> <span class="o">+</span>
                                <span class="s1">&#39;string or undefined. Found: &#39;</span> <span class="o">+</span> <span class="nx">border</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="nx">border</span> <span class="o">||</span> <span class="s1">&#39;3px solid red&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">highlighted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.unhighlight">
  <h3>
    <a href="#feedback.unhighlight" name="feedback.unhighlight" class="pilcrow">&#182;</a>
    Feedback.unhighlight
  </h3>
</div>

  </div>
  <div class="body"><p>Removes highlight from the form</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">See</div>
    <div class="dox_tag_detail">
      <span class="dox_type">Feedback.highlighted
</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">unhighlight</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">highlighted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="feedback.reset">
  <h3>
    <a href="#feedback.reset" name="feedback.reset" class="pilcrow">&#182;</a>
    Feedback.reset
  </h3>
</div>

  </div>
  <div class="body"><p>Resets feedback and collected paradata</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">Feedback</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">attempts</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">timeInputBegin</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">timeInputEnd</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_feedback</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">isHighlighted</span><span class="p">())</span> <span class="k">this</span><span class="p">.</span><span class="nx">unhighlight</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="helper%20functions.">
  <h2>
    <a href="#helper%20functions." name="helper%20functions." class="pilcrow">&#182;</a>
    Helper functions.
  </h2>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="checkfeedbacklength">
  <h3>
    <a href="#checkfeedbacklength" name="checkfeedbacklength" class="pilcrow">&#182;</a>
    checkFeedbackLength
  </h3>
</div>

  </div>
  <div class="body"><p>Checks the feedback length</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">feedbackTextarea</span>
      <span class="dox_type">HTMLElement</span>
      <span>The textarea with feedback</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">charCounter</span>
      <span class="dox_type">HTMLElement</span>
      <span>The span counting the characthers</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">submit</span>
      <span class="dox_type">HTMLElement</span>
      <span>The submit button</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">minLength</span>
      <span class="dox_type">number</span>
      <span>The minimum length of feedback</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">maxLength</span>
      <span class="dox_type">number</span>
      <span>The max length of feedback</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">checkFeedbackLength</span><span class="p">(</span><span class="nx">feedbackTextarea</span><span class="p">,</span> <span class="nx">charCounter</span><span class="p">,</span>
                                 <span class="nx">submit</span><span class="p">,</span> <span class="nx">minLength</span><span class="p">,</span> <span class="nx">maxLength</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">length</span><span class="p">;</span>

        <span class="nx">length</span> <span class="o">=</span> <span class="nx">feedbackTextarea</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">length</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">minLength</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">submit</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">(</span><span class="nx">minLength</span> <span class="o">-</span> <span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; characters needed.&#39;</span><span class="p">;</span>
          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;#f2dede&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="nx">maxLength</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">submit</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">(</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">maxLength</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; characters over.&#39;</span><span class="p">;</span>
          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;#f2dede&#39;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
          <span class="nx">submit</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">(</span><span class="nx">maxLength</span> <span class="o">-</span> <span class="nx">length</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39; characters remaining.&#39;</span><span class="p">;</span>
          <span class="nx">charCounter</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;#dff0d8&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="getfeedback">
  <h3>
    <a href="#getfeedback" name="getfeedback" class="pilcrow">&#182;</a>
    getFeedback
  </h3>
</div>

  </div>
  <div class="body"><p>Returns the value of the feedback textarea or in <code>_feedback</code></p>

<p>Must be invoked with right context</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">string</span>
      <span class="dox_type">null</span>
      <span>The value of the feedback, if any</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">getEmail</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">feedbackHTML</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_feedback</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">})(</span><span class="nx">node</span><span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
