// nodegame-widgets

(function(e){function t(){this.root=null}e.Widget=t,t.prototype.dependencies={},t.prototype.defaults={},t.prototype.defaults.fieldset={legend:"Widget"},t.prototype.listeners=function(){},t.prototype.getRoot=function(){return this.root},t.prototype.getValues=function(){},t.prototype.append=function(){},t.prototype.init=function(){},t.prototype.getRoot=function(){},t.prototype.listeners=function(){},t.prototype.getAllValues=function(){},t.prototype.highlight=function(){}})("undefined"!=typeof node?node:module.parent.exports.node),function(e,t){function r(){this.widgets={},this.root=t.window.root||document.body}var n=t.JSUS;r.prototype.register=function(e,r){if(!e||!r)return t.err("Could not register widget: "+e,"nodegame-widgets: "),!1;for(var i in t.Widget.prototype)!r[i]&&!r.prototype[i]&&(!r.prototype.__proto__||!r.prototype.__proto__[i])&&(r.prototype[i]=n.clone(t.Widget.prototype[i]));return this.widgets[e]=r,this.widgets[e]},r.prototype.get=function(e,r){function s(e,t,n){if(!e||!t||!n)return;e.getRoot()[t]=function(){n.call(e)}}function o(e,t){if(!e||!t)return;var r=!1;for(var i in e)e.hasOwnProperty(i)&&(r=n.in_array(i,["onclick","onfocus","onblur","onchange","onsubmit","onload","onunload","onmouseover"]),r&&"function"==typeof e[i]&&s(t,i,e[i]))}if(!e)return;var i=this;r=r||{};var u=n.getNestedValue(e,this.widgets),a;if(!u){t.err("widget "+e+" not found.","node-widgets: ");return}t.info("registering "+u.name+" v."+u.version,"node-widgets: ");if(!this.checkDependencies(u))return!1;n.mixout(r,n.clone(u.defaults));try{a=new u(r),a.defaults=r,a.listeners.call(a),o(r,a)}catch(f){throw new Error("Error while loading widget "+u.name+": "+f)}return a},r.prototype.append=r.prototype.add=function(e,t,n){function i(e,t,n){if(!t)return e;var r=t.id||n.id+"_fieldset",i=t.legend||n.legend;return W.addFieldset(e,r,i,t.attributes)}if(!e)return;var r=this;return t=t||this.root,n=n||{},"object"!=typeof e&&(e=this.get(e,n)),e?(t=i(t,n.fieldset||e.defaults.fieldset,e),e.append(t),e):!1},r.prototype.checkDependencies=function(r,i){if(!r.dependencies)return!0;var s=function(e,n){var r=e.name||e.id;t.log(n+" not found. "+r+" cannot be loaded.","ERR")},o=[e,t,this.widgets,t.window],u=r.dependencies;for(var a in u)if(u.hasOwnProperty(a)){var f=!1;for(var l=0;l<o.length;l++)if(n.getNestedValue(a,o[l])){var f=!0;break}if(!f)return i||s(r,a),!1}return!0},t.widgets=new r}("undefined"!=typeof window?window:module.parent.exports.window,"undefined"!=typeof window?window.node:module.parent.exports.node)