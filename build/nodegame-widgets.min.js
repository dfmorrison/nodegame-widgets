/**
 * 
 * # nodegame-widgets
 * 
 * Copyright(c) 2012 Stefano Balietti
 * MIT Licensed
 * 
 */
(function(e,t){function r(){this.widgets={},this.root=W.root}var n=t.JSUS;r.prototype.register=function(e,n){return e?(this.widgets[e]=n?new n.constructor:new t.Widget,this.widgets[e]):(t.err("Could not register widget: "+e,"nodegame-widgets"),!1)},r.prototype.get=function(e,r){function s(e,t){if(!e||!t)return;for(var r in e)e.hasOwnProperty(r)&&n.in_array(r,["onclick","onfocus","onblur","onchange","onsubmit","onload","onunload","onmouseover"])&&(t.getRoot()[r]=function(){e[r].call(t)})}if(!e)return;var i=this;r=r||{};var o=n.getNestedValue(e,this.widgets);if(!o){t.log("Widget "+e+" not found.","ERR");return}t.log("nodeWindow: registering widget "+o.name+" v."+o.version);if(!this.checkDependencies(o))return!1;r=n.merge(o.defaults||{},r);try{o.constructor(r),s(r,o)}catch(u){throw"Error while loading widget "+o.name+": "+u}return o},r.prototype.append=r.prototype.add=function(e,t,n){function i(e,t,n){if(!t)return e;var r=t.id||n.id+"_fieldset",i=t.legend||n.legend;return W.addFieldset(e,r,i,t.attributes)}if(!e)return;var r=this;return t=t||this.root,n=n||{},"object"!=typeof e&&(e=this.get(e,n)),e?(t=i(t,n.fieldset||e.defaults.fieldset,e),e.append(t),e):!1},r.prototype.checkDependencies=function(r,i){if(!r.dependencies)return!0;var s=function(e,n){var r=e.name||e.id;t.log(n+" not found. "+r+" cannot be loaded.","ERR")},o=[e,t,this.widgets,t.window],u=r.dependencies;for(var a in u)if(u.hasOwnProperty(a)){var f=!1;for(var l=0;l<o.length;l++)if(n.getNestedValue(a,o[l])){var f=!0;break}if(!f)return i||s(r,a),!1}return!0},t.widgets=new r})("undefined"!=typeof window?window:module.parent.exports.window,"undefined"!=typeof window?window.node:module.parent.exports.node),function(e){function t(){this.root=null}e.Widget=t,t.prototype.dependencies={},t.prototype.defaults={},t.prototype.defaults.fieldset={legend:"Widget"},t.prototype.listeners=function(){},t.prototype.getRoot=function(){return this.root},t.prototype.getValues=function(){},t.prototype.append=function(){},t.prototype.init=function(){},t.prototype.getRoot=function(){},t.prototype.listeners=function(){},t.prototype.getAllValues=function(){},t.prototype.highlight=function(){}}("undefined"!=typeof node?node:module.parent.exports.node),function(e){var t=e.widgets.register("GameSummary");t.defaults.fieldset={legend:"Game Summary"},t.id="gamesummary",t.name="Game Summary",t.version="0.3",t.description="Show the general configuration options of the game.",t.constructor=function(e){this.summaryDiv=null},t.append=function(t){return this.root=t,this.summaryDiv=e.window.addDiv(t),this.writeSummary(),t},t.writeSummary=function(t,n){var r=document.createTextNode("Name: "+e.game.name),i=document.createTextNode("Descr: "+e.game.description),s=document.createTextNode("Min Pl.: "+e.game.minPlayers),o=document.createTextNode("Max Pl.: "+e.game.maxPlayers);this.summaryDiv.appendChild(r),this.summaryDiv.appendChild(document.createElement("br")),this.summaryDiv.appendChild(i),this.summaryDiv.appendChild(document.createElement("br")),this.summaryDiv.appendChild(s),this.summaryDiv.appendChild(document.createElement("br")),this.summaryDiv.appendChild(o),e.window.addDiv(this.root,this.summaryDiv,n)}}(node)